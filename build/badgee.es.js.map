{"version":3,"file":"badgee.es.js","sources":["../src/utils.js","../src/console.js","../src/config.js","../src/styles.js","../src/filter.js","../src/badgee.js"],"sourcesContent":["export const noop = () => {}\n\nexport const each = (items, fn) => {\n  for (const i in items) {\n    fn(items[i], i)\n  }\n}\n\nconst _extend = (dest, obj) => {\n  for (const i in obj) dest[i] = obj[i]\n  return dest\n}\nexport const clone = (obj) => _extend({}, obj)\nexport const extend = (dest, obj) => _extend(clone(dest), obj)\n","import { noop, each } from './utils.js'\n// Homogeneisation of the console API on different browsers\n//  - add compat console object if not available\n//  - some methods might not be defined. fake them with `noop` function\n\nconst console = this.console || {};\n\n// For the record, every single console methods and properties :\n// [\"memory\", \"exception\", \"debug\", \"error\", \"info\", \"log\", \"warn\", \"dir\",\n// \"dirxml\", \"table\", \"trace\", \"assert\", \"count\", \"markTimeline\", \"profile\",\n// \"profileEnd\", \"time\", \"timeEnd\", \"timeStamp\", \"timeline\", \"timelineEnd\",\n// \"group\", \"groupCollapsed\", \"groupEnd\", \"clear\"]\n//\n// Focus on logging methods and ignore profiling/timeline methods or less used methods\nconst methods             = ['debug', 'error', 'group', 'groupCollapsed', 'info', 'log', 'warn'];\nconst unformatableMethods = ['clear', 'dir', 'groupEnd'];\n\nexport const eachFormatableMethod   = (fn) => { each(methods, fn) }\nexport const eachUnformatableMethod = (fn) => { each(unformatableMethods, fn) }\nexport const eachMethod = (fn) => {\n  eachFormatableMethod(fn)\n  eachUnformatableMethod(fn)\n}\n\neachMethod((method) => {\n  console[method] = console[method] || noop;\n})\n\nexport default console\n","import { clone, extend } from './utils';\n\n// default configuration\nconst defaults = {\n  enabled : true,\n  styled  :  true\n};\n\nlet config = clone(defaults);\n\nconst configure = function(conf) {\n  // update conf\n  if (typeof conf === 'object') {\n    config = extend(defaults, conf);\n  }\n\n  // return current conf\n  return config;\n};\n\n// export default configure\nexport { config, configure }\n","import { each, extend } from './utils';\n\n// Create store to save styles\nconst store = {};\n\n// Default properties for styles\nlet defaultsStyle = {\n  'border-radius': '2px',\n  'padding'      : '1px 3px',\n  'margin'       : '0 1px',\n  'color'        : 'white'\n};\n\nconst styles = {\n  // define a new style or list existing ones\n  style(name, style) {\n    if (name != null && style != null) {\n      style = extend(defaultsStyle, style);\n      store[name] = style;\n    }\n    else if (name != null) {\n      return store[name];\n    }\n    return Object.keys(store);\n  },\n\n  defaults(style) {\n    if (style != null) {\n      defaultsStyle = style;\n    }\n    return defaultsStyle;\n  },\n\n  stringForStyle(name) {\n    const res = []\n    each(store[name], (style, k) => {\n      res.push(`${k}:${style};`)\n    })\n    return res.join('');\n  }\n};\n\n\n// define a few styles\nconst empty = {};\nconst black = {'color': 'black'};\n\nstyles.style('green',   extend(empty, {'background': 'green'}));\nstyles.style('red',     extend(empty, {'background': 'red'}));\nstyles.style('orange',  extend(black, {'background': 'orange'}));\n\n\nexport default styles;\n","const filter = {\n  include : null,\n  exclude : null\n};\n\nexport function isFiltered(str) {\n  const isntIncluded = (filter.include != null) && !filter.include.test(str);\n  const isExcluded = (filter.exclude != null) && filter.exclude.test(str);\n  return isntIncluded || isExcluded\n}\n\nexport function getFilter(onFilterChange) {\n  return {\n    none() {\n      filter.include = null\n      filter.exclude = null\n\n      onFilterChange()\n      return this;\n    },\n\n    include(matcher = null) {\n      if (matcher !== filter.include) {\n        filter.include = matcher;\n        onFilterChange()\n      }\n      return this;\n    },\n\n    exclude(matcher = null) {\n      if (matcher !== filter.exclude) {\n        filter.exclude = matcher;\n        onFilterChange();\n      }\n      return this;\n    }\n  };\n}\n","/* eslint-disable no-console */\n/*! badgee v1.2.0 - MIT license */\nimport { noop, extend, each } from './utils.js'\nimport console, {\n  eachMethod, eachFormatableMethod, eachUnformatableMethod\n} from './console.js'\nimport { config, configure } from './config.js';\nimport styles from './styles.js';\nimport { getFilter, isFiltered } from './filter.js';\n\nconst store = {};\n\n// Given a label, style and parentName, generate the full list of arguments to\n// pass to console method to get a foramted output\nconst argsForBadgee = function(label, style, parentName) {\n  let args = [];\n\n  if (!config.styled) { style = false; }\n  if (parentName) {\n    const parent = store[parentName];\n    args = argsForBadgee(parent.badgee.label, parent.style, parent.parent);\n  }\n\n  if (label) {\n    // concat formated label for badges output\n    // (i.e. \"%cbadge1%cbadge2\" with style or \"[badge1][badge2] without style\")\n    const formatedLabel = !style ? `[${label}]` : `%c${label}`\n    args[0] = `${args[0] || ''}${formatedLabel}`\n  }\n\n  if (style) {\n    args.push(styles.stringForStyle(style));\n  }\n\n  return args;\n};\n\n// Define Badgee methods form console object\n// Intended to be called in a 'Badgee' instance context (e.g. with 'bind()')\nconst _defineMethods = function(style, parentName) {\n  // get arguments to pass to console object\n  const args = argsForBadgee(this.label, style, parentName);\n\n  if (!config.enabled || isFiltered(args[0])) {\n    // disable everything\n    eachMethod((method) => this[method] = noop)\n    return\n  }\n\n  // Define Badgee 'formatable' methods form console object\n  eachFormatableMethod((method) => {\n    this[method] = console[method].bind(console, ...args);\n  })\n\n  // Define Badgee 'unformatable' methods form console object\n  eachUnformatableMethod((method) => {\n    this[method] = console[method].bind(console);\n  })\n};\n\n// ==================================\n\nclass Badgee {\n\n  constructor(label, style, parentName) {\n    // Define Badgee methods form console object\n    this.label = label;\n    _defineMethods.bind(this, style, parentName)();\n\n    // Store instance for later reference\n    store[this.label] = {\n      badgee: this,\n      style,\n      parent: parentName\n    };\n  }\n\n  // Defines a new Badgee instance with @ as parent Badge\n  define(label, style) {\n    return new Badgee(label, style, this.label);\n  }\n}\n\n// ==================================\n\nconst redefineMethodsForAllBadges = () => {\n  each(store, (b) => {\n    _defineMethods.bind(b.badgee, b.style, b.parent)()\n  })\n}\n\n// Create public Badgee instance\nlet b = new Badgee;\n\n// Augment public instance with utility methods\nb.style = styles.style;\nb.defaultStyle  = styles.defaults;\nb.get = label => (store[label] || {}).badgee;\nb.filter = getFilter(redefineMethodsForAllBadges)\n\nb.config = function(conf) {\n  // when conf is updated, redefine every badgee method\n  if (conf) {\n    configure(conf)\n    redefineMethodsForAllBadges();\n  }\n  return config;\n};\n\n// Some browsers don't allow to use bind on console object anyway\n// fallback to default if needed\ntry {\n  b.log();\n} catch (e) {\n  b = extend(console, {\n    define       : () => b,\n    style        : b.style,\n    defaultStyle : b.defaultStyle,\n    filter       : b.filter,\n    get          : () => b,\n    config       : () => b.config,\n  });\n}\n\nexport default b;\n"],"names":["const","this","let","store","style"],"mappings":"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"}